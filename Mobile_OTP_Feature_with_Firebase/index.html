<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OTP Verification</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js"></script>
  </head>
  <body>
    <div id="recaptcha-container"></div>
    <form id="otp-form">
      <input type="text" id="phone-number" placeholder="Enter phone number" />
      <button type="button" onclick="sendOTP()">Send OTP</button>
      <input type="text" id="otp" placeholder="Enter OTP" />
      <button type="button" onclick="verifyOTP()">Verify OTP</button>
    </form>

    <script>
      // Your Firebase configuration
      const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // Send OTP
      function sendOTP() {
        let phoneNumber = document.getElementById("phone-number").value;
        let recaptchaVerifier = new firebase.auth.RecaptchaVerifier(
          "recaptcha-container",
          {
            size: "normal",
            callback: function (response) {
              // reCAPTCHA solved, allow sendOTP function
              onSignInSubmit();
            },
            "expired-callback": function () {
              // Response expired. Ask user to solve reCAPTCHA again.
            },
          }
        );
        firebase
          .auth()
          .signInWithPhoneNumber(phoneNumber, recaptchaVerifier)
          .then(function (confirmationResult) {
            window.confirmationResult = confirmationResult;
            console.log("OTP sent");
          })
          .catch(function (error) {
            console.log(error.message);
          });
      }

      // Verify OTP
      function verifyOTP() {
        let otp = document.getElementById("otp").value;
        confirmationResult
          .confirm(otp)
          .then(function (result) {
            let user = result.user;
            console.log("User signed in");
          })
          .catch(function (error) {
            console.log(error.message);
          });
      }
    </script>
  </body>
</html>
